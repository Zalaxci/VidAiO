## About
This app will (hopefully!) be a cross platform streaming app for video streaming sites like youtube and anime/movie streaming sites like bflix.gg or hianime.to. The name "VidAiO" = Video All In One is meant to indicate its ability to play video from any site, on any platform.
## What is implemented (currently)
For now, however, this is just a very basic linux flatpak app to search "hianime.to", built with QT and QML. The results and episode list are served in a local website, served by golang Echo, and displayed in QtWebView. In golang I tried to implement seperation of concerns between the API handler and the UI, as the "APIFetcher" struct and the structs implementing the "HTMLRetriever" interface to get the HTML are seperate. However, for now, all we really do is just get some JSON from hianime.to, and display the "html" property of the JSON as raw html, with some CSS styling to make it actually presentable. To make the html templates served by golang cleaner and less repetitive, I seperated the head and end of the body, which I placed in a seperate, "base.html" file.
## Flatpak
As I'm no profficient flatpak developer and this is really my first desktop app, ".flatpak-manifest.yaml" is based on io.qt.qtwebengine.BaseApp from github, and the modules propertie is modified according to KDE's Haruna video player, i.e. it includes mpv and a bunch of dependencies like ffmpeg and lua. I hope I didn't do something wrong or import unnecessary modules.
## TODO!
My current goal is to port the video source extractors from the "aniwatch" npm package to golang, so we can get the hls streams, and then play them in mpv. To communicate between C++ and go, hopefully I can pass in a pointer to a C++ function, that will be called when getting a golang route (e.g. localhost:33444/ani/play/:episodeId/:serverId or localhost:33444/play?url=":serverUrl"). Then I'll pass in the HLS stream I'll extract from the video streaming server (e.g. megacloud) to the C++ function which will create the MpvQt (KDE's library I included in .flatpak-manifest.yaml) QML element.

Next up, I will try to get this to work for other movie and anime streaming platforms and youtube. Last but not least, I will parse the scraped HTML with goquery or some other go library to convert it into custom HTML for my app and prevent potential security risks - or preferably convert it into an object to display as native QML (QT) widgets,
## Other platforms?
I mainly aim to make this work for linux, but hopefully I'll be able to compile it to android (to watch youtube and anime from hianime on android) and windows too. I don't really think I'll support apple devices as I have no Macbook or Apple developer account.
## Why not electron
Because MPV is lighter, works better than chromium video playback on linux (which sometimes doesn't use hardware accelaration, consuming too much CPU and battery), is more extensible and is the only way I could personally get to play HLS streams from these sneaky streaming sites that only allow the video to be played from their own site with a referrer policy. Also, because electron is crap on wayland, and I had A LOT of difficulty getting fcitx5 (language input) to work on VSCode. Finally, electron only works on desktop and is a lot more bloated than even a QtWebView, while if I can convert the HTML to native QT this app will be even prettier and lighter.